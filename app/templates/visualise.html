{% extends "base.html" %}
{% block title %}Visualize Data â€“ DataVizApp{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8 px-4">
  <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
    <!-- Left Panel: Visualization Options -->
    <aside class="bg-white rounded-2xl shadow-lg p-6 flex flex-col gap-6">
      <h2 class="text-lg font-bold text-gray-800">Visualization Options</h2>
      <form method="GET" action="/plot" class="space-y-4">
        <div>
          <label for="xCol" class="block text-sm font-medium text-gray-700">X-Axis</label>
          <select id="xCol" name="xCol" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="dimension1">Dimension 1</option>
            <option value="dimension2">Dimension 2</option>
            <!-- Add more options dynamically -->
          </select>
        </div>
        <div>
          <label for="yCol" class="block text-sm font-medium text-gray-700">Y-Axis</label>
          <select id="yCol" name="yCol" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="measure1">Measure 1</option>
            <option value="measure2">Measure 2</option>
            <!-- Add more options dynamically -->
          </select>
        </div>
        <div>
          <label for="chartType" class="block text-sm font-medium text-gray-700">Chart Type</label>
          <select id="chartType" name="chartType" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="scatter">Scatter Plot</option>
            <option value="pie">Pie Chart</option>
            <option value="area">Area Chart</option>
          </select>
        </div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 transition">
          Generate Visualization
        </button>
      </form>
    </aside>

    <!-- Center Panel: Visualization Display -->
    <main class="col-span-3 bg-white rounded-2xl shadow-lg p-6">
      <h2 class="text-lg font-bold text-gray-800 mb-4">Visualization</h2>
      {% if chart %}
      <div class="flex justify-center">
        <img src="{{ url_for('static', filename=chart) }}" alt="Visualization" class="w-full max-w-3xl rounded-lg shadow">
      </div>
      {% else %}
      <p class="text-gray-600 text-center">Select options from the left panel to generate a visualization.</p>
      {% endif %}
    </main>
  </div>

  <!-- Additional Options -->
  <div class="max-w-7xl mx-auto mt-8 bg-white rounded-2xl shadow-lg p-6">
    <h2 class="text-lg font-bold text-gray-800 mb-4">Advanced Options</h2>
    <form method="GET" action="/plot/advanced" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="title" class="block text-sm font-medium text-gray-700">Chart Title</label>
        <input type="text" id="title" name="title" placeholder="Enter chart title"
          class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div>
        <label for="color" class="block text-sm font-medium text-gray-700">Chart Color</label>
        <input type="color" id="color" name="color" value="#0000ff"
          class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div>
        <label for="grid" class="block text-sm font-medium text-gray-700">Show Grid</label>
        <select id="grid" name="grid" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
      </div>
      <div>
        <label for="figsize" class="block text-sm font-medium text-gray-700">Figure Size</label>
        <input type="text" id="figsize" name="figsize" placeholder="e.g., 10,6"
          class="w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <button type="submit" class="col-span-2 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 transition">
        Apply Advanced Options
      </button>
    </form>
  </div>
</div>
{% endblock %}